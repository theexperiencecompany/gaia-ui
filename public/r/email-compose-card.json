{
	"$schema": "https://ui.shadcn.com/schema/registry-item.json",
	"name": "email-compose-card",
	"type": "registry:ui",
	"title": "Email Compose Card",
	"description": "An AI-powered email composition card with recipient validation, smart inputs, and beautiful styling.",
	"dependencies": ["@hugeicons/react", "@hugeicons/core-free-icons"],
	"registryDependencies": [],
	"files": [
		{
			"path": "registry/new-york/ui/email-compose-card.tsx",
			"content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Cancel01Icon, Loading03Icon } from \"@hugeicons/core-free-icons\";\nimport { HugeiconsIcon } from \"@hugeicons/react\";\nimport {\n\tuseEffect,\n\tuseState,\n\ttype ClipboardEvent,\n\ttype FC,\n\ttype KeyboardEvent,\n} from \"react\";\n\nexport interface EmailRecipient {\n\temail: string;\n\tisValid?: boolean;\n}\n\nexport interface EmailComposeCardProps {\n\tsubject: string;\n\tbody: string;\n\trecipients: string[];\n\tmode?: \"view\" | \"edit\";\n\trecipientQuery?: string;\n\tonSubjectChange?: (subject: string) => void;\n\tonBodyChange?: (body: string) => void;\n\tonRecipientsChange?: (recipients: string[]) => void;\n\tonSend?: () => void;\n\tonCancel?: () => void;\n\tisSending?: boolean;\n\tclassName?: string;\n}\n\nconst isValidEmail = (email: string): boolean => {\n\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\treturn emailRegex.test(email.trim());\n};\n\nexport const EmailComposeCard: FC<EmailComposeCardProps> = ({\n\tsubject: initialSubject,\n\tbody: initialBody,\n\trecipients: initialRecipients,\n\tmode = \"edit\",\n\trecipientQuery,\n\tonSubjectChange,\n\tonBodyChange,\n\tonRecipientsChange,\n\tonSend,\n\tonCancel,\n\tisSending = false,\n\tclassName,\n}) => {\n\tconst [subject, setSubject] = useState(initialSubject);\n\tconst [body, setBody] = useState(initialBody);\n\tconst [emailChips, setEmailChips] = useState<EmailRecipient[]>(\n\t\tinitialRecipients.map((email) => ({ email, isValid: isValidEmail(email) })),\n\t);\n\tconst [currentInput, setCurrentInput] = useState(\"\");\n\tconst [errors, setErrors] = useState<{\n\t\tsubject?: string;\n\t\tbody?: string;\n\t\trecipients?: string;\n\t}>({});\n\n\t// Sync state with props\n\tuseEffect(() => {\n\t\tsetSubject(initialSubject);\n\t}, [initialSubject]);\n\n\tuseEffect(() => {\n\t\tsetBody(initialBody);\n\t}, [initialBody]);\n\n\tconst addEmailChip = (email: string) => {\n\t\tconst trimmedEmail = email.trim();\n\t\tif (\n\t\t\ttrimmedEmail &&\n\t\t\t!emailChips.some((chip) => chip.email === trimmedEmail)\n\t\t) {\n\t\t\tconst newChip = {\n\t\t\t\temail: trimmedEmail,\n\t\t\t\tisValid: isValidEmail(trimmedEmail),\n\t\t\t};\n\t\t\tconst newChips = [...emailChips, newChip];\n\t\t\tsetEmailChips(newChips);\n\t\t\tsetCurrentInput(\"\");\n\t\t\tsetErrors((prev) => ({ ...prev, recipients: undefined }));\n\t\t\tonRecipientsChange?.(newChips.map((c) => c.email));\n\t\t}\n\t};\n\n\tconst removeEmailChip = (emailToRemove: string) => {\n\t\tconst newChips = emailChips.filter((chip) => chip.email !== emailToRemove);\n\t\tsetEmailChips(newChips);\n\t\tonRecipientsChange?.(newChips.map((c) => c.email));\n\t};\n\n\tconst handleInputKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\n\t\tif (e.key === \"Enter\" || e.key === \",\" || e.key === \" \") {\n\t\t\te.preventDefault();\n\t\t\tif (currentInput.trim()) {\n\t\t\t\taddEmailChip(currentInput);\n\t\t\t}\n\t\t} else if (\n\t\t\te.key === \"Backspace\" &&\n\t\t\t!currentInput &&\n\t\t\temailChips.length > 0\n\t\t) {\n\t\t\tconst lastChip = emailChips[emailChips.length - 1];\n\t\t\tremoveEmailChip(lastChip.email);\n\t\t}\n\t};\n\n\tconst handlePaste = (e: ClipboardEvent<HTMLInputElement>) => {\n\t\te.preventDefault();\n\t\tconst pastedText = e.clipboardData.getData(\"text\");\n\t\tconst emails = pastedText.split(/[,;\\s]+/).filter((email) => email.trim());\n\t\tfor (const email of emails) {\n\t\t\taddEmailChip(email);\n\t\t}\n\t};\n\n\tconst handleSend = () => {\n\t\tconst newErrors: typeof errors = {};\n\t\tif (!subject.trim()) newErrors.subject = \"Subject is required\";\n\t\tif (!body.trim()) newErrors.body = \"Body is required\";\n\t\tif (emailChips.length === 0)\n\t\t\tnewErrors.recipients = \"At least one recipient is required\";\n\t\telse {\n\t\t\tconst invalidCount = emailChips.filter((c) => !c.isValid).length;\n\t\t\tif (invalidCount > 0)\n\t\t\t\tnewErrors.recipients = `${invalidCount} invalid email(s)`;\n\t\t}\n\n\t\tsetErrors(newErrors);\n\t\tif (Object.keys(newErrors).length === 0 && onSend) {\n\t\t\tonSend();\n\t\t}\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t\"flex flex-col gap-6 rounded-2xl bg-white p-6 shadow-sm border border-zinc-200 dark:bg-zinc-900 dark:border-zinc-800\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{/* Header */}\n\t\t\t<div>\n\t\t\t\t<h2 className=\"text-xl font-semibold text-zinc-900 dark:text-zinc-100\">\n\t\t\t\t\tReview & Send Email\n\t\t\t\t</h2>\n\t\t\t\t<p className=\"text-sm text-zinc-500 dark:text-zinc-400 mt-1\">\n\t\t\t\t\t{recipientQuery\n\t\t\t\t\t\t? `AI composed this email based on: \"${recipientQuery}\"`\n\t\t\t\t\t\t: \"Review and edit your email before sending\"}\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Form */}\n\t\t\t<div className=\"space-y-6\">\n\t\t\t\t{/* Recipients */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<span className=\"text-sm font-medium text-zinc-900 dark:text-zinc-100\">\n\t\t\t\t\t\tTo <span className=\"text-red-500\">*</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"min-h-[56px] rounded-xl border-2 p-3 transition-colors bg-zinc-50 dark:bg-zinc-800/50\",\n\t\t\t\t\t\t\terrors.recipients\n\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t: \"border-zinc-200 dark:border-zinc-700\",\n\t\t\t\t\t\t\t\"focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t{emailChips.map((chip) => (\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tkey={chip.email}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"inline-flex items-center gap-1 rounded-lg px-2 py-1 text-xs font-medium max-w-[200px]\",\n\t\t\t\t\t\t\t\t\t\tchip.isValid\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-blue-500/10 text-blue-700 dark:bg-blue-500/20 dark:text-blue-400\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-red-500/10 text-red-700 dark:bg-red-500/20 dark:text-red-400\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"truncate\">{chip.email}</span>\n\t\t\t\t\t\t\t\t\t{mode === \"edit\" && (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeEmailChip(chip.email)}\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\"ml-1 rounded-full p-0.5 hover:bg-black/5 dark:hover:bg-white/10 transition-colors\",\n\t\t\t\t\t\t\t\t\t\t\t\tchip.isValid\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"text-blue-600 dark:text-blue-400\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-red-600 dark:text-red-400\",\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<HugeiconsIcon icon={Cancel01Icon} size={10} />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t{mode === \"edit\" && (\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={currentInput}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setCurrentInput(e.target.value)}\n\t\t\t\t\t\t\t\t\tonKeyDown={handleInputKeyDown}\n\t\t\t\t\t\t\t\t\tonPaste={handlePaste}\n\t\t\t\t\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\t\t\t\t\tif (currentInput.trim()) {\n\t\t\t\t\t\t\t\t\t\t\taddEmailChip(currentInput);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\t\temailChips.length === 0\n\t\t\t\t\t\t\t\t\t\t\t? \"Enter email addresses...\"\n\t\t\t\t\t\t\t\t\t\t\t: \"Add more emails...\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName=\"min-w-[120px] flex-1 bg-transparent text-sm outline-none placeholder:text-zinc-400 text-zinc-900 dark:text-zinc-100\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{errors.recipients && (\n\t\t\t\t\t\t<p className=\"text-xs text-red-500 mt-1\">{errors.recipients}</p>\n\t\t\t\t\t)}\n\t\t\t\t\t{mode === \"edit\" && !errors.recipients && (\n\t\t\t\t\t\t<p className=\"text-xs text-zinc-500 mt-1\">\n\t\t\t\t\t\t\tPress Enter, comma, or space to add emails. Use Backspace to\n\t\t\t\t\t\t\tremove last email.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Subject */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor=\"email-subject\"\n\t\t\t\t\t\tclassName=\"text-sm font-medium text-zinc-900 dark:text-zinc-100\"\n\t\t\t\t\t>\n\t\t\t\t\t\tSubject <span className=\"text-red-500\">*</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t{mode === \"edit\" ? (\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"email-subject\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={subject}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSubject(e.target.value);\n\t\t\t\t\t\t\t\t\tif (errors.subject)\n\t\t\t\t\t\t\t\t\t\tsetErrors((p) => ({ ...p, subject: undefined }));\n\t\t\t\t\t\t\t\t\tonSubjectChange?.(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tplaceholder=\"Email subject\"\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"w-full rounded-xl border-2 px-3 py-3 text-sm transition-all outline-none\",\n\t\t\t\t\t\t\t\t\t\"bg-transparent\",\n\t\t\t\t\t\t\t\t\terrors.subject\n\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t: \"border-zinc-200 dark:border-zinc-700\",\n\t\t\t\t\t\t\t\t\t\"focus:border-blue-500 focus:ring-1 focus:ring-blue-500\",\n\t\t\t\t\t\t\t\t\t\"placeholder:text-zinc-400 text-zinc-900 dark:text-zinc-100\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors.subject && (\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-red-500 mt-1 absolute -bottom-5\">\n\t\t\t\t\t\t\t\t\t{errors.subject}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p className=\"text-sm font-medium text-zinc-900 dark:text-zinc-100 p-2\">\n\t\t\t\t\t\t\t{subject}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Body */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor=\"email-body\"\n\t\t\t\t\t\tclassName=\"text-sm font-medium text-zinc-900 dark:text-zinc-100\"\n\t\t\t\t\t>\n\t\t\t\t\t\tBody <span className=\"text-red-500\">*</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t{mode === \"edit\" ? (\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tid=\"email-body\"\n\t\t\t\t\t\t\t\tvalue={body}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetBody(e.target.value);\n\t\t\t\t\t\t\t\t\tif (errors.body)\n\t\t\t\t\t\t\t\t\t\tsetErrors((p) => ({ ...p, body: undefined }));\n\t\t\t\t\t\t\t\t\tonBodyChange?.(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tplaceholder=\"Email body\"\n\t\t\t\t\t\t\t\trows={12}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"w-full rounded-xl border-2 px-3 py-3 text-sm transition-all outline-none resize-none\",\n\t\t\t\t\t\t\t\t\t\"bg-transparent\",\n\t\t\t\t\t\t\t\t\terrors.body\n\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t: \"border-zinc-200 dark:border-zinc-700\",\n\t\t\t\t\t\t\t\t\t\"focus:border-blue-500 focus:ring-1 focus:ring-blue-500\",\n\t\t\t\t\t\t\t\t\t\"placeholder:text-zinc-400 text-zinc-900 dark:text-zinc-100\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors.body && (\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-red-500 mt-1 absolute -bottom-5\">\n\t\t\t\t\t\t\t\t\t{errors.body}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p className=\"text-sm text-zinc-700 dark:text-zinc-300 whitespace-pre-line leading-relaxed p-2\">\n\t\t\t\t\t\t\t{body}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Footer */}\n\t\t\t<div className=\"flex justify-end gap-3 mt-2\">\n\t\t\t\t{onCancel && (\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={onCancel}\n\t\t\t\t\t\tdisabled={isSending}\n\t\t\t\t\t\tclassName=\"rounded-lg px-4 py-2 text-sm font-medium text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 transition-colors disabled:opacity-50\"\n\t\t\t\t\t>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{onSend && mode === \"edit\" && (\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={handleSend}\n\t\t\t\t\t\tdisabled={isSending}\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium text-white transition-colors\",\n\t\t\t\t\t\t\t\"bg-blue-500 hover:bg-blue-600 shadow-sm shadow-blue-500/20\",\n\t\t\t\t\t\t\tisSending && \"opacity-50 cursor-not-allowed\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isSending ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<HugeiconsIcon\n\t\t\t\t\t\t\t\t\ticon={Loading03Icon}\n\t\t\t\t\t\t\t\t\tsize={16}\n\t\t\t\t\t\t\t\t\tclassName=\"animate-spin\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\tSending...\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\tSend Email\n\t\t\t\t\t\t\t\t{/* <HugeiconsIcon icon={SentIcon} size={16} /> */}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n",
			"type": "registry:ui"
		}
	]
}
